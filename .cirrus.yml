container:
  image: python:slim
env: 
  CIRRUS_CLONE_SUBMODULES: true
  
task:
  pip_cache:
    folder: ~/.cache/pip
    fingerprint_script: echo $PYTHON_VERSION
  environment:
    CC: clang 
    CXX: clang++
  install_dependencies_script: |
    bash tools/cibw_linux.sh
  build_script: |
    python -m pip install .
  test_script: |
    python -m pytest tests/